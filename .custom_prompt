#!/bin/bash

short_prompt() {
    RETVAL=$?
    prompt_status
    # prompt_virtualenv
    prompt_aws
    # prompt_context
    prompt_dir 1
    prompt_git
    prompt_bzr
    prompt_hg
    prompt_end
}

long_prompt(){
    RETVAL=$?
    prompt_status
    prompt_virtualenv
    prompt_aws
    prompt_context
    prompt_dir
    prompt_git
    prompt_bzr
    prompt_hg
    prompt_end
}

## toggle verbose and brief prompt
function prompt() {
    if [ -v SHORT_PROMPT ]
    then # verbose is default
        unset SHORT_PROMPT
        PROMPT=$(long_prompt)
    else # short prompt
        PROMPT=$(short_prompt)
        export SHORT_PROMPT=1
    fi
}
# slightly different prompt configurations if in VScode or iterm2
if [ "$TERM_PROGRAM" = "vscode" ]; then
    PROMPT=$(short_prompt)
else ## Only run neofetch if it is not a terminal in vscode
    [ "$(date +%j)" != "$(cat ~/.nf.prevtime 2>/dev/null)" ] && { neofetch; date +%j > ~/.nf.prevtime ;} ||  true 
    PROMPT=$(short_prompt) # origibally long prompt
fi